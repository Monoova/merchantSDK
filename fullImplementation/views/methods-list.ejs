<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout</title>
    <style>
      #checkout-container {
        display: flex;
        flex-direction: col mt-2umn;
        padding: 12px 24px;
      }
    </style>
    <link rel="stylesheet" href="/static/style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <noscript>
      <div
        style="
          text-align: center;
          margin: 20px;
          padding: 20px;
          background-color: #f44336;
          color: white;
        "
      >
        Please enable JavaScript to continue using this application.
      </div>
    </noscript>
    <div id="main-wrapper" class="container-sm">
      <div id="error-box"></div>
      <div id="mov-header" class="text-center mb-4 mt-4">
        <div class="headerWLogo row">
          <div class="col-2">
            <img
              width="150"
              class="mt-1"
              src="https://movdpwebsiteprodae.blob.core.windows.net/images/Monoova.png"
            />
          </div>
          <div class="col-8">
            <h1 class="d-none d-md-block">Monoova Payments</h1>
            <a href="/logout" class="btn btn-info" role="button">Logout</a>
          </div>
        </div>
        <h4 class="d-none d-md-block">
          Please fill the details below to submit your payment
        </h4>
      </div>
      <div id="mov-form-wrapper" class="shadow">
        <% if (activeMethods && activeMethods.length > 0) { %>
        <form id="mov-payment-form" class="container" onsubmit="return false">
          <div class="form-group col-6">
            <label for="selectMethod">Select a method:</label>
            <select class="form-control" id="selectMethod" name="selectedMethod">
              <% activeMethods.forEach(function(method) { %>
                <option value="<%= method.clientPaymentTokenUniqueReference %>"><%= method.clientPaymentTokenUniqueReference %> (<%= method.status %>)</option>
              <% }); %>
            </select>
          </div>

          <input type="hidden" id="customerId" name="customer[customerId]" value="<%= customerId %>">

        <div class="mb-3 col-6">
          <label for="amount" class="form-label mb-0">Amount</label>
          <input
            type="text"
            class="form-control"
            id="amount"
            required
            pattern="^\$\d{1,3}(,\d{3})*(\.\d+)?$"
            data-type="currency"
            name="amount"
            placeholder="$1,000.00"
            required
          />
        </div>

        <div class="mb-3 col-6">
          <label for="description" class="form-label"
            >Description</label
          >
          <input
            type="text"
            class="form-control"
            id="description"
            name="description"
            placeholder="Bills"
            required
          />
        </div>
        <button
        type="submit"
        class="btn btn-primary mx-auto d-block"
        onclick="submitPayment(this)"
      >
        Make a Payment
      </button>
        </form>
        <% } else { %>
          <div class="text-center">
            <p>No payment methods found. Please save a sucessful payment method to proceed.</p>
            <!-- You can also include a button or link here to add a new method -->
          </div>
        <% } %>
        <!-- Button to go back to root page -->
        <a href="/" class="btn btn-primary">Return to Main Page</a>
      </div>
      <div id="mov-status-wrapper" class="shadow">
        <div class="text-center">
          <h1 id="response-status"></h1>
          <br/>
          <p id="response-text"></p>
          <br/>
        </div>
      </div>
      </div>
      <div id="loader" class="shadow justify-content-center align-items-center">
        <div class="d-flex justify-content-center" id="loading">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
      <div id="checkout-container" class="shadow mt-2"></div>
    </div>
    <div
      id="mov-footer"
      class="container-sm text-center d-flex justify-content-center align-items-center mb-0 mt-4"
    >
      &copy; Monoova Payments Pty Limited (ACN 126 015 227 / Authorised
      Representative No. 000428863)
    </div>

    <script
      src="https://code.jquery.com/jquery-3.6.3.slim.min.js"
      integrity="sha256-ZwqZIVdD3iXNyGHbSYdsmWP//UBokj2FHAxKuSBKDSo="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <!-- script for checkout.html -->
    <script src="../static/resume.js"></script>
  </body>
</html>




